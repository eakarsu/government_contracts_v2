docker logs ce5627145a30156afd9efffa36298e3ce02ae37eacd9abb2745f28b90f8e8b34
Starting PostgreSQL...
Starting PostgreSQL 15 database server: main.
localhost:5432 - accepting connections
PostgreSQL is ready
Starting Flask application...
[2025-06-13 18:50:35 +0000] [1] [INFO] Starting gunicorn 23.0.0
[2025-06-13 18:50:35 +0000] [1] [INFO] Listening at: http://0.0.0.0:5000 (1)
[2025-06-13 18:50:35 +0000] [1] [INFO] Using worker: sync
[2025-06-13 18:50:35 +0000] [48] [INFO] Booting worker with pid: 48
INFO:services.vector_database:Docker container detected, ensuring clean ChromaDB initialization
INFO:services.vector_database:Docker container detected, ensuring clean ChromaDB initialization
INFO:chromadb.telemetry.product.posthog:Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
INFO:chromadb.telemetry.product.posthog:Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
DEBUG:chromadb.config:Starting component System
DEBUG:chromadb.config:Starting component Posthog
DEBUG:chromadb.config:Starting component System
DEBUG:chromadb.config:Starting component Posthog
WARNING:services.vector_database:Attempt 1 failed to initialize ChromaDB: error returned from database: (code: 1) table collections already exists
INFO:services.vector_database:Cleaned ChromaDB directory for attempt 2
WARNING:services.vector_database:Attempt 2 failed to initialize ChromaDB: Could not connect to tenant default_tenant. Are you sure it exists?
INFO:services.vector_database:Cleaned ChromaDB directory for attempt 3
WARNING:services.vector_database:Attempt 3 failed to initialize ChromaDB: Could not connect to tenant default_tenant. Are you sure it exists?
ERROR:services.vector_database:All attempts to initialize ChromaDB failed: Could not connect to tenant default_tenant. Are you sure it exists?
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 460, in _validate_tenant_database
    self._admin_client.get_tenant(name=tenant)
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 517, in get_tenant
    return self._server.get_tenant(name=name)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/rust.py", line 165, in get_tenant
    tenant = self.bindings.get_tenant(name)
             ^^^^^^^^^^^^^
AttributeError: 'RustBindingsAPI' object has no attribute 'bindings'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/init-database.py", line 9, in <module>
    from main import app
  File "/app/main.py", line 1, in <module>
    from app import app  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^
  File "/app/app.py", line 32, in <module>
    from routes.api_routes import api_bp
  File "/app/routes/api_routes.py", line 9, in <module>
    from services.processed_document_indexer import processed_indexer
  File "/app/services/processed_document_indexer.py", line 169, in <module>
    processed_indexer = ProcessedDocumentIndexer()
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/services/processed_document_indexer.py", line 21, in __init__
    self.vector_db = VectorDatabase()
                     ^^^^^^^^^^^^^^^^
  File "/app/services/vector_database.py", line 18, in __init__
    self._initialize_client()
  File "/app/services/vector_database.py", line 83, in _initialize_client
    raise e
  File "/app/services/vector_database.py", line 39, in _initialize_client
    self.client = chromadb.PersistentClient(path=persist_directory)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/__init__.py", line 161, in PersistentClient
    return ClientCreator(tenant=tenant, database=database, settings=settings)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 87, in __init__
    self._validate_tenant_database(tenant=self.tenant, database=self.database)
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 469, in _validate_tenant_database
    raise ValueError(
ValueError: Could not connect to tenant default_tenant. Are you sure it exists?
WARNING:services.vector_database:Attempt 1 failed to initialize ChromaDB: Database error: error returned from database: (code: 1032) attempt to write a readonly database
INFO:services.vector_database:Cleaned ChromaDB directory for attempt 2
WARNING:services.vector_database:Attempt 2 failed to initialize ChromaDB: Database error: error returned from database: (code: 1032) attempt to write a readonly database
INFO:services.vector_database:Cleaned ChromaDB directory for attempt 3
WARNING:services.vector_database:Attempt 3 failed to initialize ChromaDB: Database error: error returned from database: (code: 1032) attempt to write a readonly database
ERROR:services.vector_database:All attempts to initialize ChromaDB failed: Database error: error returned from database: (code: 1032) attempt to write a readonly database
[2025-06-13 18:50:37 +0000] [48] [ERROR] Exception in worker process
Traceback (most recent call last):
  File "/app/services/vector_database.py", line 43, in _initialize_client
    self.contracts_collection = self.client.get_collection("government_contracts")
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 192, in get_collection
    model = self._server.get_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/rust.py", line 248, in get_collection
    collection = self.bindings.get_collection(name, tenant, database)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.NotFoundError: Collection [government_contracts] does not exists

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/gunicorn/arbiter.py", line 608, in spawn_worker
    worker.init_process()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/workers/base.py", line 135, in init_process
    self.load_wsgi()
  File "/usr/local/lib/python3.11/site-packages/gunicorn/workers/base.py", line 147, in load_wsgi
    self.wsgi = self.app.wsgi()
                ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/base.py", line 66, in wsgi
    self.callable = self.load()
                    ^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/wsgiapp.py", line 57, in load
    return self.load_wsgiapp()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/app/wsgiapp.py", line 47, in load_wsgiapp
    return util.import_app(self.app_uri)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/gunicorn/util.py", line 370, in import_app
    mod = importlib.import_module(module)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/app/main.py", line 1, in <module>
    from app import app  # noqa: F401
    ^^^^^^^^^^^^^^^^^^^
  File "/app/app.py", line 32, in <module>
    from routes.api_routes import api_bp
  File "/app/routes/api_routes.py", line 9, in <module>
    from services.processed_document_indexer import processed_indexer
  File "/app/services/processed_document_indexer.py", line 169, in <module>
    processed_indexer = ProcessedDocumentIndexer()
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/services/processed_document_indexer.py", line 21, in __init__
    self.vector_db = VectorDatabase()
                     ^^^^^^^^^^^^^^^^
  File "/app/services/vector_database.py", line 18, in __init__
    self._initialize_client()
  File "/app/services/vector_database.py", line 83, in _initialize_client
    raise e
  File "/app/services/vector_database.py", line 47, in _initialize_client
    self.contracts_collection = self.client.create_collection(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/client.py", line 168, in create_collection
    model = self._server.create_collection(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/chromadb/api/rust.py", line 227, in create_collection
    collection = self.bindings.create_collection(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
chromadb.errors.InternalError: Database error: error returned from database: (code: 1032) attempt to write a readonly database
[2025-06-13 18:50:37 +0000] [48] [INFO] Worker exiting (pid: 48)